{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Payment Management","description":"APIs for processing payments"}],"paths":{"/webhooks/register":{"post":{"tags":["webhook-controller"],"summary":"Register a webhook endpoint","description":"Client provides a URL. Server generates a secret and stores the endpoint.","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterWebhookRequest"}}},"required":true},"responses":{"201":{"description":"Webhook registered","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RegisterWebhookResponse"}}}},"400":{"description":"Invalid input","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RegisterWebhookResponse"}}}}}}},"/api/payments":{"post":{"tags":["Payment Management"],"summary":"Create a new payment","description":"Encrypts card data, stores payment, and triggers webhook event.","operationId":"createPayment","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentRequest"}}},"required":true},"responses":{"400":{"description":"Invalid request payload","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PaymentResponse"}}}},"201":{"description":"Payment created successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PaymentResponse"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PaymentResponse"}}}}}}}},"components":{"schemas":{"RegisterWebhookRequest":{"required":["url"],"type":"object","properties":{"url":{"type":"string","description":"The URL your server will receive webhook POST requests on.","example":"https://myserver.com/webhook"}},"description":"Request body for registering a webhook endpoint."},"RegisterWebhookResponse":{"type":"object","properties":{"id":{"type":"integer","description":"Internal ID for this webhook endpoint.","format":"int64"},"url":{"type":"string","description":"The URL that will receive webhook POST requests.","example":"https://merchant.example.com/webhook"},"secret":{"type":"string","description":"A Base64-encoded secret used to verify HMAC signatures on webhook events.","example":"AVxk9lj2Q49pR9uXKj48z1s3dLr09asdf89Q=="}},"description":"Response returned after successfully registering a webhook endpoint."},"PaymentRequest":{"required":["amount","cardNumber","currency","firstName","lastName","zipCode"],"type":"object","properties":{"firstName":{"type":"string","description":"Payer's first name","example":"John"},"lastName":{"type":"string","description":"Payer's last name","example":"Doe"},"zipCode":{"maxLength":10,"minLength":3,"type":"string","description":"Zip code","example":"2000"},"cardNumber":{"type":"string","description":"Credit card number (plain text)","example":"4111111111111111"},"amount":{"minimum":1,"type":"integer","description":"Payment amount in cents (e.g. 1000 = 10.00 AUD)","format":"int64","example":1000},"currency":{"pattern":"[A-Z]{3}","type":"string","description":"Currency code (ISO 4217)","example":"AUD"}}},"PaymentResponse":{"type":"object","properties":{"paymentId":{"type":"string"},"status":{"type":"string"},"last4":{"type":"string"}}}}}}